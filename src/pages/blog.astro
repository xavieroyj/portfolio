---
import GenericLayout from "../layouts/GenericLayout.astro";
import { convertDateFormat } from "../lib/helper";
import { getCollection } from "astro:content";

const blogEntries = await getCollection("blogs", ({ data }) => {
    return data.draft !== true;
});
---

<GenericLayout title="Blog">
    <main class="container mx-auto px-4 max-w-3xl py-8 md:py-3">
        <h1 class="text-4xl font-bold mb-4">Welcome to my humble abode</h1>
        <p class="text-md mb-8 dark:text-gray-400">
            Here is where i write about my ramblings, it contains what i've
            learnt so far. It can range from technologies to lifestyle.
        </p>

        <ul class="space-y-8">
            {
                blogEntries.map((post) => {
                    return (
                        <section>
                            <div>
                                <h2 class="text-2xl font-semibold underline">
                                    <a href={`/blogs/${post.slug}/`}>
                                        {post.data.title}
                                    </a>
                                </h2>
                                <p class="text-sm text-gray-500 mb-4">
                                    {convertDateFormat(post.data.pubDate)}
                                </p>
                            </div>
                            <p>{post.data.description}</p>
                        </section>
                    );
                })
            }
        </ul>
    </main>
</GenericLayout>
